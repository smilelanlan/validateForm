<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>普通页面表单验证</title>
</head>
<body>
<form id="myform" method="post">
    <p>
        <label for="myname">用户名：</label>
        <input id="myname" name="myname" />
    </p>
    <p>
        <label for="phone">手机号：</label>
        <input id="phone" name="phone" />
    </p>
    <p>
        <label for="email">E-Mail：</label>
        <input id="email" name="email" />
    </p>
    <p>
        <label for="password">登陆密码：</label>
        <input id="password" name="password" type="password"/>
    </p>
    <p>
        <label for="confirm_password">确认密码：</label>
        <input id="confirm_password" name="confirm_password" type="password"/>
    </p>
    <p>
        <span>性别：</span>
        <span for="gender_male">男</span>
        <input  type="radio" id="gender_male" value="m" name="gender"/>
        <label for="gender_female">女</label>
        <input  type="radio" id="gender_female" value="f" name="gender"/>
    </p>
    <p>
        <span>有无工作经验：</span>
        <span for="accept_no">有</span>
        <input  type="radio" id="accept_yes" value="1" name="accept"/>
        <label for="accept_no">无</label>
        <input  type="radio" id="accept_no" value="2" name="accept"/>
    </p>
    <p>
        <span>爱好：</span>
        <label for="hobby_read">读书</label>
        <input type="checkbox" id="hobby_read" value="read" name="hobby"/>
        <label for="hobby_write">写作</label>
        <input type="checkbox" id="hobby_write" value="write" name="hobby" />
        <label for="hobby_sing">唱歌</label>
        <input type="checkbox" id="hobby_sing" value="sing" name="hobby" />
        <label for="hobby_dance">唱歌</label>
        <input type="checkbox" id="hobby_dance" value="sing" name="hobby" />
    </p>
    <p>
        <label for="experience">工作经历：</label>
        <textarea name="experience" id="experience" cols="30" rows="10"></textarea>
    </p>
    <p>
        <input class="submitbtn" type="submit" value="立即注册" />
    </p>
</form>
<script src="lib/jquery.js"></script>
<script src="dist/validateForm.js"></script>
<script>
    $(function(){
        ValidateForm.addRule("chrName",function(v){
            if(!v)return false;
            var reg=/^chr/;
            if(reg.test(v)){
                return true;
            }else{
                return false;
            }
        });

        var myform = new ValidateForm({
            wrap: '#myform',
            rules: {
                myname: {
                    required: true,
                    reg:"chrName"
                },
                phone: {
                    required: true,
                    reg:/^1[3-9][0-9]\d{8}$/
                },
                email: {
                    required: true,
                    reg: "email"
                },
                password: {
                    required: true,
                    reg: "password"
                },
                confirm_password:{
                    required: true,
                    reg: "password"
                },
                experience:{
                    required: true,
                    reg: function(v){
                        if(v.length>5){
                            return true;
                        }else{
                            return false;
                        }
                    }
                },
                gender:{
                    required: true
                },
                hobby: {
                    required: true,
                    minLength:2,
                    maxLength:3
                }
            },
            msg: {
                myname: {
                    required: "用户名不能为空",
                    reg:"用户名格式不对"
                },
                phone: {
                    required: "手机号不能为空",
                    reg:"手机号格式不正确"
                },
                email: {
                    required: "邮箱不能为空",
                    reg: "邮箱格式不正确",
                    sucCb:function(value,ele){
                        var $parent=$(ele).parents("p");
                        var $icon=$parent.find(".icon");
                        if($icon.length<1){
                            $icon=$('<span class="icon"></span>');
                            $parent.append($icon);
                        }
                        $icon.html("v").css({"color":"green"});
                    },
                    failCb:function(str,ele){
                        var $parent=$(ele).parents("p");
                        var $icon=$parent.find(".icon");
                        if($icon.length<1){
                            $icon=$('<span class="icon"></span>');
                            $parent.append($icon);
                        }
                        $icon.html("x").css({"color":"red"});
                    }
                },
                password: {
                    required: "密码不能为空",
                    reg: "密码格式不正确"
                },
                confirm_password:{
                    required: "密码不能为空",
                    reg: "密码格式不正确"
                },
                gender:{
                    required: "性别不能为空",
                    sucCb:function(value,ele){
                        console.log(value);
                    },
                    failCb:function(){
                        console.log("请选择性别");
                    }
                },
                experience:{
                    required: "工作经历不能为空",
                    reg: "工作经历不能少于5个字"
                },
                hobby: {
                    required:"爱好不能为空",
                    minLength:"不能少于2个",
                    maxLength:"不能多于3个"
                }

            },
            validFieldSuc:function(value,ele){
                var $parent=$(ele).parents("p");
                var $tip=$parent.find(".tip");
                if($tip.length<1){
                    $tip=$('<span class="tip"></span>');
                    $parent.append($tip);
                }
                $tip.html("验证通过").css({"color":"green"});

            },
            validFieldFail:function(str,ele){
                var $parent=$(ele).parents("p");
                var $tip=$parent.find(".tip");
                if($tip.length<1){
                    $tip=$('<span class="tip"></span>');
                    $parent.append($tip);
                }
                $tip.html(str).css({"color":"red"});
            }
        });

        $(".submitbtn").on("click",function(e){
            if (e.preventDefault) {
                e.preventDefault();
            } else {
                e.returnValue = false;
            }
            myform.valid({
                ignore:"experience",
                cb:function (result) {
                    if(result.status){
                        console.log("表单验证通过",result.data);
                    }else{
                        console.log("表单验证失败",result.msg);
                    }
                }
            })



        })

    })



</script>
</body>
</html>